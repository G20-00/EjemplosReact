<html>
  <head>
    <meta charset="UTF-8" />
    <title>Hello World</title>
    <script src="https://unpkg.com/react@17/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>

    <!-- Don't use this in production: -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.jsdelivr.net/remarkable/1.7.1/remarkable.min.js"></script>
    <style>
      .square {
          background: #fff;
          border: 1px solid #999;
          
          font-size: 24px;
          font-weight: bold;
          line-height: 34px;
          height: 50px;
          margin-right: -1px;
          margin-top: -1px;
          padding: 0;
          text-align: center;
          width: 50px;
        }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">

        function Square(props) {
            return (
              <button className="square" onClick={props.onClick}>
                {props.value}
              </button>
            );
          
        }

        class Board extends React.Component{
            renderSquare(i){
                return (
                  <Square 
                    value={i} 
                    onClick={() => this.props.onClick(i)} 
                  />
                );
            }

            render(){

              return(
                <div>
                    <div className="status">{status}</div>
                    <div className="board-row">
                        {this.renderSquare("A8")}
                        {this.renderSquare("B8")}
                        {this.renderSquare("C8")}
                        {this.renderSquare("D8")}
                        {this.renderSquare("E8")}
                        {this.renderSquare("F8")}
                        {this.renderSquare("G8")}
                        {this.renderSquare("H8")}
                        
                    </div>
                    <div className="board-row">
                        {this.renderSquare("A7")}
                        {this.renderSquare("B7")}
                        {this.renderSquare("C7")}
                        {this.renderSquare("D7")}
                        {this.renderSquare("E7")}
                        {this.renderSquare("F7")}
                        {this.renderSquare("G7")}
                        {this.renderSquare("H7")}
                    </div>
                    <div className="board-row">
                        {this.renderSquare("A6")}
                        {this.renderSquare("B6")}
                        {this.renderSquare("C6")}
                        {this.renderSquare("D6")}
                        {this.renderSquare("E6")}
                        {this.renderSquare("F6")}
                        {this.renderSquare("G6")}
                        {this.renderSquare("H6")}
                    </div>
                    <div className="board-row">
                        {this.renderSquare("A5")}
                        {this.renderSquare("B5")}
                        {this.renderSquare("C5")}
                        {this.renderSquare("D5")}
                        {this.renderSquare("E5")}
                        {this.renderSquare("F5")}
                        {this.renderSquare("G5")}
                        {this.renderSquare("H5")}
                    </div>
                    <div className="board-row">
                        {this.renderSquare("A4")}
                        {this.renderSquare("B4")}
                        {this.renderSquare("C4")}
                        {this.renderSquare("D4")}
                        {this.renderSquare("E4")}
                        {this.renderSquare("F4")}
                        {this.renderSquare("G4")}
                        {this.renderSquare("H4")}
                    </div>
                    <div className="board-row">
                        {this.renderSquare("A3")}
                        {this.renderSquare("B3")}
                        {this.renderSquare("C3")}
                        {this.renderSquare("D3")}
                        {this.renderSquare("E3")}
                        {this.renderSquare("F3")}
                        {this.renderSquare("G3")}
                        {this.renderSquare("H3")}
                    </div>
                    <div className="board-row">
                        {this.renderSquare("A2")}
                        {this.renderSquare("B2")}
                        {this.renderSquare("C2")}
                        {this.renderSquare("D2")}
                        {this.renderSquare("E2")}
                        {this.renderSquare("F2")}
                        {this.renderSquare("G2")}
                        {this.renderSquare("H2")}
                    </div>
                    <div className="board-row">
                        {this.renderSquare("A1")}
                        {this.renderSquare("B1")}
                        {this.renderSquare("C1")}
                        {this.renderSquare("D1")}
                        {this.renderSquare("E1")}
                        {this.renderSquare("F1")}
                        {this.renderSquare("G1")}
                        {this.renderSquare("H1")}
                    </div>
                </div>
              );
                
            }
        }


        class Game extends React.Component{
          constructor(props){
            super(props);
            this.state = {
              
              squares : [
                "A1", "A2", "A3", "A4", "A5", "A6", "A7", "A8",  
                "B1", "B2", "B3", "B4", "B5", "B6", "B7", "B8",
                "C1", "C2", "C3", "C4", "C5", "C6", "C7", "C8",
                "D1", "D2", "D3", "D4", "D5", "D6", "D7", "D8",
                "E1", "E2", "E3", "E4", "E5", "E6", "E7", "E8",
                "F1", "F2", "F3", "F4", "F5", "F6", "F7", "F8",
                "G1", "G2", "G3", "G4", "G5", "G6", "G7", "G8",
                "H1", "H2", "H3", "H4", "H5", "H6", "H7", "H8"],
                current : Math.floor(Math.random() * 65),
                records : [],
                lastTime : Date.now()
            };
          }

          

           handleClick(square){
            if(square == this.state.squares[this.state.current]){
              let timeNow = Date.now()
              let timeTook = timeNow - this.state.lastTime
              let newRecord = {
                square : this.state.squares[this.state.current], time : timeTook, valid : "âœ“"
              }
              this.state.records= this.state.records.concat(newRecord)
              this.state.lastTime = timeNow
              this.state.current = Math.floor(Math.random() * 65)
              document.getElementById("currentLabel").innerHTML = this.state.squares[this.state.current]
              document.getElementById("list").innerHTML = listToText(this.state.records)
            }else{
              let timeNow = Date.now()
              let timeTook = timeNow - this.state.lastTime
              let newRecord = {
                square : this.state.squares[this.state.current], time : timeTook, valid : "X"
              }
              this.state.records= this.state.records.concat(newRecord)
              this.state.lastTime = timeNow
              this.state.current = Math.floor(Math.random() * 65)
              document.getElementById("currentLabel").innerHTML = this.state.squares[this.state.current]
              document.getElementById("list").innerHTML = listToText(this.state.records)
            }

            console.log(this.state.records)
           }

           render(){
             
            return(
              <div>
                <Board onClick={i => this.handleClick(i)}/>
                <p id = "currentLabel">{this.state.squares[this.state.current]}</p>
                <p id="list"></p>
              </div>
            );
           };
        }

        function listToText(list){
          let text = ""
          for(let i = list.length-1; i>=0;i--){
              text += list[i].valid + " " + list[i].square + " " + list[i].time + " Miliseconds || " + "\n"
          }
          return text
        }
    

        class ScoreList extends React.Component{
          render() {
            return (
             <li>{props.items}</li>
            );
          }
        }

        ReactDOM.render(<Game />, document.getElementById('root'))
    </script>

    <!--
      Note: this page is a great way to try React but it's not suitable for production.
      It slowly compiles JSX with Babel in the browser and uses a large development build of React.

      Read this section for a production-ready setup with JSX:
      https://reactjs.org/docs/add-react-to-a-website.html#add-jsx-to-a-project

      In a larger project, you can use an integrated toolchain that includes JSX instead:
      https://reactjs.org/docs/create-a-new-react-app.html

      You can also use React without JSX, in which case you can remove Babel:
      https://reactjs.org/docs/react-without-jsx.html
    -->
  </body>

  
</html>